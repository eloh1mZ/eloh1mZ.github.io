const title=document.querySelector(".greeting__heading"),titleText=title.innerText,subtitle=document.querySelector(".greeting__content"),subtitleText=subtitle.innerText,scrollDown=document.querySelector(".scroll-down"),scrollDownText=scrollDown.innerText,canvas=document.querySelector(".greeting__bg"),ctx=canvas.getContext("2d"),settings={minSize:3,maxSize:7,maxSpeed:10,count:50,g:.1};let w=canvas.width=window.innerWidth,h=canvas.height=window.innerHeight;class Particle{constructor(t,e,n,i){this.pos={x:t,y:e},this.vel={x:Math.floor((Math.random()-.5)*settings.maxSpeed),y:Math.floor((Math.random()-.5)*settings.maxSpeed)},this.r=n,this.c=i}draw(){ctx.fillStyle=`hsl(${this.c}, 50%, 50%)`,ctx.beginPath(),ctx.arc(this.pos.x,this.pos.y,this.r,0,2*Math.PI),ctx.fill()}update(){this.pos.x+=this.vel.x,this.pos.y+=this.vel.y,this.vel.y+=settings.g,this.c=(this.c+1)%360}}let particles=[];function init(){draw()}window.onresize=function(){w=canvas.width=window.innerWidth,h=canvas.height=window.innerHeight};let mouseX=-10,mouseY=-10;const greeting=document.querySelector(".greeting");function bang(t,e){for(var n=settings.count;n>=0;n--)particles.push(new Particle(t,e,settings.minSize+Math.floor((Math.random()-.5)*(settings.maxSize-settings.minSize)),12*Math.floor(30*Math.random())))}function draw(){ctx.fillStyle="rgba(0,0,0,0.1)",ctx.fillRect(0,0,w,h),Math.random()>.99&&bang(settings.maxSize+Math.floor(Math.random()*(w-settings.maxSize)),settings.maxSize+Math.floor(Math.random()*(h-settings.maxSize))),particles.forEach(t=>{if(t.update(),t.draw(),t.pos.x-t.r>=w||t.pos.x+t.r<=0||t.pos.y-t.r>=h||t.pos.y+t.r<=0){const e=particles.indexOf(t);e>-1&&particles.splice(e,1)}}),ctx.fillStyle=ctx.strokeStyle=`hsl(${360*(Math.sin(mouseX/w+mouseY/h)+1)}, 50%, 50%)`,ctx.beginPath(),ctx.arc(mouseX,mouseY,5,0,2*Math.PI),ctx.fill(),ctx.beginPath(),ctx.arc(mouseX,mouseY,10,0,2*Math.PI),ctx.stroke(),requestAnimationFrame(draw)}function animate(t){for(let e=t.length-1;e>=0;e--)Math.random()>.99&&(t=t.replace(t[e],t[e].toUpperCase())),Math.random()>.99&&(t=t.replace(t[e],t[e].toLowerCase()));return t}function copy(t,e){const n=document.createElement("textarea");n.value=e,document.body.appendChild(n),n.select(),n.setSelectionRange(0,99999),document.execCommand("copy"),n.remove();const i=document.createElement("span");i.className="secondary",i.innerText=" copied",t.parentElement.appendChild(i),setTimeout(()=>{i.remove()},2500)}greeting.onmousedown=function(t){bang(t.pageX,t.pageY-window.scrollY),greeting.onmousemove=function(t){mouseX=t.pageX,mouseY=t.pageY-window.scrollY,(t.pageX+t.pageY)%10==0&&bang(t.pageX,t.pageY-window.scrollY)},greeting.onmouseup=function(t){greeting.onmousemove=function(t){mouseX=t.pageX,mouseY=t.pageY-window.scrollY}}},greeting.onmousemove=function(t){mouseX=t.pageX,mouseY=t.pageY-window.scrollY},init(),setInterval(function(){let t=animate(titleText);t!=title.innerText&&(title.innerText=t),(t=animate(subtitleText))!=subtitle.innerText&&(subtitle.innerText=t),(t=animate(scrollDownText))!=scrollDown.innerText&&(scrollDown.innerText=t),Math.random()>.99&&(title.classList.add("glitch"),subtitle.classList.add("glitch"),title.setAttribute("style",`--x: ${Math.floor(10*Math.random())/20}em; --y: ${Math.floor(10*Math.random())/20}em;`),subtitle.setAttribute("style",`--x: ${Math.floor(10*Math.random())/20}em; --y: ${Math.floor(10*Math.random())/20}em;`),setTimeout(()=>{title.classList.remove("glitch"),subtitle.classList.remove("glitch")},200))},100);let linkNav=document.querySelectorAll('[href^="#"]'),V=1;for(let e=0;e<linkNav.length;e++)linkNav[e].addEventListener("click",function(e){e.preventDefault();let n=window.pageYOffset,i=this.href.replace(/[^#]*(.*)/,"$1");t=document.querySelector(i).getBoundingClientRect().top,start=null,requestAnimationFrame(function e(o){null===start&&(start=o);let a=o-start,s=t<0?Math.max(n-a/V,n+t):Math.min(n+a/V,n+t);window.scrollTo(0,s);s!=n+t?requestAnimationFrame(e):location.hash=i})},!1);